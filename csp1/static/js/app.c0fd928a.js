(function(){"use strict";var e={60:function(e,i,t){var n=t(674),o=t(953);function l(e,i,t,n,l,a){const s=(0,o.up)("MainMap");return(0,o.wg)(),(0,o.j4)(s)}var a=t(939);const s={key:0,id:"panal"},r=(0,o.Uk)("经度：   "),c=(0,o._)("br",null,null,-1),d=(0,o.Uk)("纬度：   "),u=(0,o._)("br",null,null,-1),p=(0,o.Uk)("大地高："),h=(0,o._)("br",null,null,-1),w=(0,o.Uk)("视角高："),v={id:"demSwitch"},m={id:"animate"},f=(0,o.Uk)("巡游"),g=(0,o.Uk)("俯视"),_={id:"query"},b=(0,o.Uk)("查询高程点"),I=(0,o.Uk)("清除查询点"),y={id:"drawPlant"},k=(0,o.Uk)("划定范围"),C=(0,o.Uk)("清除洪水面"),L={id:"dmxpj"},D=(0,o.Uk)("划断面线"),x=(0,o.Uk)("清除断面线"),O={id:"view"},E=(0,o.Uk)("至"),A={id:"map"},N={id:"el"},T=(0,o._)("span",null,"DMAA",-1),B=(0,o.Uk)("         "),W=(0,o._)("br",null,null,-1),U=(0,o._)("span",null,"HYDA",-1),z=(0,o.Uk)("          "),M=(0,o._)("br",null,null,-1),H=(0,o._)("span",null,"中线里程点",-1),V=(0,o.Uk)("   "),$=(0,o._)("br",null,null,-1),R=(0,o._)("span",null,"踏勘照片",-1),j=(0,o.Uk)("      "),X=(0,o._)("br",null,null,-1),S=(0,o._)("span",null,"航飞照片",-1),P=(0,o.Uk)("      ");function Z(e,i,t,l,Z,F){const K=(0,o.up)("el-tag"),Q=(0,o.up)("el-option"),q=(0,o.up)("el-select"),G=(0,o.up)("el-button"),Y=(0,o.up)("el-switch");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.query_panel_show?((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(K,{size:"large",effect:"dark"},{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Uk)("   "+(0,a.zw)(e.jd),1),c,(0,o.Wm)(K,{size:"large",effect:"dark"},{default:(0,o.w5)((()=>[d])),_:1}),(0,o.Uk)("   "+(0,a.zw)(e.wd),1),u,(0,o.Wm)(K,{size:"large",effect:"dark"},{default:(0,o.w5)((()=>[p])),_:1}),(0,o.Uk)("   "+(0,a.zw)(e.ddg),1),h,(0,o.Wm)(K,{size:"large",effect:"dark"},{default:(0,o.w5)((()=>[w])),_:1}),(0,o.Uk)("   "+(0,a.zw)(e.sjg),1)])):(0,o.kq)("",!0),(0,o._)("div",v,[(0,o.Wm)(q,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=i=>e.value=i),class:"m-2",placeholder:"请选择地形显示行政区",onChange:l.selectterrain,size:"small"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.op,(e=>((0,o.wg)(),(0,o.j4)(Q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,o._)("div",m,[(0,o.Wm)(G,{type:"success",plain:"",onClick:l.viewWithAnimate},{default:(0,o.w5)((()=>[f])),_:1},8,["onClick"]),(0,o.Wm)(G,{type:"success",plain:"",onClick:l.viewTopDown},{default:(0,o.w5)((()=>[g])),_:1},8,["onClick"])]),(0,o._)("div",_,[(0,o.Wm)(G,{type:"success",plain:"",onClick:l.QueryPoint},{default:(0,o.w5)((()=>[b])),_:1},8,["onClick"]),(0,o.Wm)(G,{type:"success",plain:"",onClick:l.cleanQueryPoint},{default:(0,o.w5)((()=>[I])),_:1},8,["onClick"])]),(0,o._)("div",y,[(0,o.Wm)(G,{type:"success",plain:"",onClick:l.drawRange},{default:(0,o.w5)((()=>[k])),_:1},8,["onClick"]),(0,o.wy)((0,o._)("input",{id:"slider1",ref:"slider",type:"range",min:"2800",max:"3800",step:"1","onUpdate:modelValue":i[1]||(i[1]=i=>e.elev=i),"data-bind":"value: elev, valueUpdate: 'input'"},null,512),[[n.nr,e.elev]]),(0,o.wy)((0,o._)("input",{type:"text",size:"5","onUpdate:modelValue":i[2]||(i[2]=i=>e.elev=i)},null,512),[[n.nr,e.elev]]),(0,o.Wm)(G,{type:"success",plain:"",onClick:l.cleanRange},{default:(0,o.w5)((()=>[C])),_:1},8,["onClick"])]),(0,o._)("div",L,[(0,o.Wm)(G,{type:"success",plain:"",onClick:l.drawDmx},{default:(0,o.w5)((()=>[D])),_:1},8,["onClick"]),(0,o.Wm)(G,{type:"success",plain:"",onClick:l.cleanDmx},{default:(0,o.w5)((()=>[x])),_:1},8,["onClick"])]),(0,o._)("div",O,[(0,o.wy)((0,o._)("input",{type:"text",size:"5","onUpdate:modelValue":i[3]||(i[3]=i=>e.e=i)},null,512),[[n.nr,e.e]]),(0,o.wy)((0,o._)("input",{type:"text",size:"5","onUpdate:modelValue":i[4]||(i[4]=i=>e.n=i)},null,512),[[n.nr,e.n]]),(0,o.Wm)(G,{type:"success",plain:"",onClick:l.viewTO},{default:(0,o.w5)((()=>[E])),_:1},8,["onClick"])]),(0,o._)("div",A,[(0,o._)("div",N,[T,B,(0,o.Wm)(Y,{modelValue:e.show_dmaa,"onUpdate:modelValue":i[5]||(i[5]=i=>e.show_dmaa=i),onChange:l.fn_show_dmaa},null,8,["modelValue","onChange"]),W,U,z,(0,o.Wm)(Y,{modelValue:e.show_hyda,"onUpdate:modelValue":i[6]||(i[6]=i=>e.show_hyda=i),onChange:l.fn_show_hyda},null,8,["modelValue","onChange"]),M,H,V,(0,o.Wm)(Y,{modelValue:e.show_zxlcd,"onUpdate:modelValue":i[7]||(i[7]=i=>e.show_zxlcd=i),onChange:l.fn_show_zxlcd},null,8,["modelValue","onChange"]),$,R,j,(0,o.Wm)(Y,{modelValue:e.show_pic_1,"onUpdate:modelValue":i[8]||(i[8]=i=>e.show_pic_1=i),onChange:l.fn_show_pic_1},null,8,["modelValue","onChange"]),X,S,P,(0,o.Wm)(Y,{modelValue:e.show_pic_2,"onUpdate:modelValue":i[9]||(i[9]=i=>e.show_pic_2=i),onChange:l.fn_show_pic_2},null,8,["modelValue","onChange"])])])],64)}var F=t(59),K=t(303),Q={setup(){const e=(0,K.qj)({ip:null,viewer:null,query_panel_show:!1,jd:null,wd:null,sjg:null,ddg:null,op:null,op2:null,value:null,slider:null,elev:2800,cn:null,handler1:null,handler2:null,handler3:null,ko:null,ecList:[],hsmPList:[],zxlcdList:[],tkpic_billboard_List:[],hfpic_billboard_List:[],dmxList:[],dmx_pointList:[],dmx_fdxList:[],dmx_labelList:[],entity_zx:null,show_dmaa:!0,show_hyda:!0,show_zxlcd:!0,show_pic_1:!0,show_pic_2:!0,e:null,n:null});F.f3v.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0MjczNDgzMy1hYzE1LTRjNWYtODZhMS01MjZkNWRiMDc2MmUiLCJpZCI6ODIxMzAsImlhdCI6MTY0NDU0ODc0M30.LpGXXWsbQXucV5MTeC2g8BCAQWiZp612gosWcK-7ocE",(0,o.bv)((()=>{e.op=[{value:"康定市",label:"康定市"},{value:"泸定县",label:"泸定县"},{value:"丹巴县",label:"丹巴县"},{value:"九龙县",label:"九龙县"},{value:"雅江县",label:"雅江县"},{value:"道孚县",label:"道孚县"},{value:"炉霍县",label:"炉霍县"},{value:"甘孜县",label:"甘孜县"},{value:"新龙县",label:"新龙县"},{value:"德格县",label:"德格县"},{value:"白玉县",label:"白玉县"},{value:"石渠县",label:"石渠县"},{value:"色达县",label:"色达县"},{value:"理塘县",label:"理塘县"},{value:"巴塘县",label:"巴塘县"},{value:"乡城县",label:"乡城县"},{value:"稻城县",label:"稻城县"},{value:"得荣县",label:"得荣县"},{value:"鲜水河",label:"鲜水河"}],e.viewer=new F.AEx("map",{timeline:!0,vrButton:!1,animation:!0,shouldAnimate:!0,terrainProvider:F.VwL({requestWaterMask:!0,requestVertexNormals:!0})}),e.viewer.camera.setView({destination:F.b91.fromDegrees(101.116466,30.849248,6400),orientation:{heading:F.ZX$.toRadians(2),pitch:F.ZX$.toRadians(-70)}}),e.value=(0,K.iH)(""),e.handler1=new F.SjE(e.viewer.scene.canvas),e.handler2=new F.SjE(e.viewer.scene.canvas),e.handler3=new F.SjE(e.viewer.scene.canvas),e.ecList.push("A");const i=new F.fBI,t=F.I4C.load("static/鲜水河/zx.json");t.then((function(t){const l=t.entities.values;for(let a=0;a<l.length;a++){const t=e.viewer.scene.globe.ellipsoid.cartesianToCartographic(l[a].position._value),s=F.ZX$.toDegrees(t.latitude),r=F.ZX$.toDegrees(t.longitude),c=Number(t.height)+400,d=F.hpI.addSeconds(o,a*n,new F.hpI),u=F.b91.fromDegrees(r,s,c);i.addSample(d,u)}}));const n=60,o=F.hpI.fromDate(new Date(2021,6,27,16)),l=F.hpI.addSeconds(o,26e3,new F.hpI);e.viewer.clock.startTime=o.clone(),e.viewer.clock.stopTime=l.clone(),e.viewer.clock.currentTime=o.clone(),e.viewer.clock.multiplier=.5,e.viewer.clock.shouldAnimate=!0,e.viewer.clock.clockRange=F.v9F.LOOP_STOP,e.viewer.entities.add({availability:new F.omy([new F.RiS({start:o,stop:l})]),position:i,id:"airPlane",model:{uri:"static/模型/drone-sccs.glb",scale:10},orientation:new F.j$H(i),path:new F.V8Z({width:0})})})),e.ip=window.location.host.split(":")[0]+":8083";const i=()=>{e.viewer.trackedEntity=e.viewer.entities.getById("airPlane")},t=F.I4C.load("static/鲜水河/xshDmx.json");t.then((function(i){e.viewer.dataSources.add(i)}));const n=new Array,l=F.I4C.load("static/鲜水河/hyda.json");l.then((function(i){const t=i.entities.values,o=t[0].polygon.hierarchy._value.positions.length;for(let l=0;l<o;l++){const i=e.viewer.scene.globe.ellipsoid.cartesianToCartographic(t[0].polygon.hierarchy._value.positions[l]),o=F.ZX$.toDegrees(i.latitude),a=F.ZX$.toDegrees(i.longitude);n.push(Number(a)),n.push(Number(o))}e.viewer.entities.add({id:"XSH_hyda",polygon:{hierarchy:new F.rVe(F.b91.fromDegreesArray(n)),classificationType:F.AN0.TERRAIN,material:new F.Ilk.fromBytes(0,191,255,100)}})}));const a=new Array,s=F.I4C.load("static/鲜水河/dmaa.json");s.then((function(i){const t=i.entities.values,n=t[0].polygon.hierarchy._value.positions.length;for(let o=0;o<n;o++){const i=e.viewer.scene.globe.ellipsoid.cartesianToCartographic(t[0].polygon.hierarchy._value.positions[o]),n=F.ZX$.toDegrees(i.latitude),l=F.ZX$.toDegrees(i.longitude);a.push(Number(l)),a.push(Number(n))}e.viewer.entities.add({id:"XSH_dmaa",polygon:{hierarchy:new F.rVe(F.b91.fromDegreesArray(a)),classificationType:F.AN0.TERRAIN,material:new F.Ilk.fromBytes(135,191,255,100)}})}));const r=F.I4C.load("static/鲜水河/zx.json");r.then((function(i){const t=i.entities.values;for(let n=0;n<t.length;n++){const i=F.ZX$.toDegrees(F.$BH.fromCartesian(t[n]._position._value).longitude),o=F.ZX$.toDegrees(F.$BH.fromCartesian(t[n]._position._value).latitude),l=F.$BH.fromCartesian(t[n]._position._value).height,a=t[n].properties.里程.valueOf()+t[n].properties.XZQMC.valueOf()+t[n].properties.XJQYMC.valueOf(),s=e.viewer.entities.add({position:F.b91.fromDegrees(i,o,l+100),cylinder:{length:100,topRadius:1,bottomRadius:1,material:F.Ilk.AQUA.withAlpha(.7),heightReference:F.MDq.CLAMP_TO_GROUND,distanceDisplayCondition:new F.QuH(10,6e3)},label:{text:a,fillColor:F.Ilk.WHITE,horizontalOrigin:F.I5p.CENTER,verticalOrigin:F.s2f.BASELINE,showBackground:!0,backgroundColor:F.Ilk.DEEPSKYBLUE,backgroundPadding:F.pQ4(30,30),style:F.gF4.FILL,distanceDisplayCondition:new F.QuH(10,4e3),scale:.7}});e.zxlcdList.push(s.id)}}));const c=F.I4C.load("static/鲜水河/photo_position3.json");c.then((function(i){const t=i.entities.values;for(let n=0;n<t.length;n++){const i=F.ZX$.toDegrees(F.$BH.fromCartesian(t[n]._position._value).longitude),o=F.ZX$.toDegrees(F.$BH.fromCartesian(t[n]._position._value).latitude),l=parseInt(F.$BH.fromCartesian(t[n]._position._value).height),a=Number(t[n]._properties.Id.valueOf()),s=`static/pic/photo_half/${a}.jpg`,r=e.viewer.entities.add({position:F.b91.fromDegrees(i,o,l+150),name:a,billboard:{image:s,scale:1,height:200,width:200,sizeInMeters:!0}});e.tkpic_billboard_List.push(r.id),e.viewer.entities.add({position:F.b91.fromDegrees(i,o,l+5),name:a,ellipsoid:{radii:new F.b91(10,10,10),material:F.Ilk.LIME.withAlpha(.9),disableDepthTestDistance:Number.POSITIVE_INFINITY,distanceDisplayCondition:new F.QuH(10,2e6)}})}}));const d=F.I4C.load("static/鲜水河/photo_position_HF.json");d.then((function(i){const t=i.entities.values;for(let n=0;n<t.length;n++){const i=F.ZX$.toDegrees(F.$BH.fromCartesian(t[n]._position._value).longitude),o=F.ZX$.toDegrees(F.$BH.fromCartesian(t[n]._position._value).latitude),l=parseInt(F.$BH.fromCartesian(t[n]._position._value).height),a=t[n]._properties._name._value,s=`static/pic/1103HF/${a}.jpg`,r=e.viewer.entities.add({position:F.b91.fromDegrees(i,o,l+180),name:a,billboard:{image:s,scale:1,height:200,width:300,sizeInMeters:!0}});e.hfpic_billboard_List.push(r.id),e.viewer.entities.add({position:F.b91.fromDegrees(i,o,l+5),name:a,model:{uri:"static/模型/drone-sccs.glb",scale:10}})}}));const u=()=>{e.viewer.trackedEntity=void 0,e.viewer.camera.flyTo({destination:F.b91.fromDegrees(101.02082271,30.73508266,6400),orientation:{heading:F.ZX$.toRadians(2),pitch:F.ZX$.toRadians(-70)}})};let p=new Array;const h=(0,K.iH)(2e3),w=()=>{e.handler1.setInputAction((function(i){e.sjg=e.viewer.camera.positionCartographic.height.toFixed(0)}),F.Wvr.MOUSE_MOVE),e.handler1.setInputAction((function(i){const t=e.viewer.scene.pickPosition(i.position),n=F.ZX$.toDegrees(F.$BH.fromCartesian(t).longitude).toFixed(6),o=F.ZX$.toDegrees(F.$BH.fromCartesian(t).latitude).toFixed(6),l=F.$BH.fromCartesian(t).height.toFixed(2),a=e.viewer.entities.add({position:F.b91.fromDegrees(Number(n),Number(o),Number(l)+1),point:{color:F.Ilk.SKYBLUE,pixelSize:3,outlineColor:F.Ilk.YELLOW,outlineWidth:1}});e.ddg=l,e.sjg=e.viewer.camera.positionCartographic.height.toFixed(0),e.jd=n,e.wd=o,e.ecList.push(a.id);const s=e.viewer.entities.add({position:F.b91.fromDegrees(Number(n),Number(o),Number(l)+3),label:{text:"大地高:"+l+"米",font:"4pt sans-serif",horizontalOrigin:F.I5p.LEFT,verticalOrigin:F.s2f.BOTTOM,fillColor:F.Ilk.BLACK,showBackground:!0,backgroundColor:new F.Ilk(1,1,1,.7),backgroundPadding:new F.pQ4(8,4),disableDepthTestDistance:Number.POSITIVE_INFINITY}});e.ecList.push(s.id),e.query_panel_show=!0}),F.Wvr.LEFT_CLICK)},v=()=>{m(),e.query_panel_show=!1;for(let i=0;i<e.ecList.length;i++)e.viewer.entities.removeById(e.ecList[i])},m=()=>{e.handler1.removeInputAction(F.Wvr.LEFT_CLICK),e.handler1.removeInputAction(F.Wvr.RIGHT_CLICK),e.handler1.removeInputAction(F.Wvr.MOUSE_MOVE),e.handler2.removeInputAction(F.Wvr.LEFT_CLICK),e.handler2.removeInputAction(F.Wvr.RIGHT_CLICK),e.handler2.removeInputAction(F.Wvr.MOUSE_MOVE)},f=()=>{function i(i){const t=e.viewer.entities.add({position:i,point:{color:F.Ilk.WHITE,pixelSize:5,heightReference:F.MDq.NONE},name:"洪水淹没面"});return e.hsmPList.push(t.id),t}function t(i){let t;return t=e.viewer.entities.add({polygon:{hierarchy:i,material:new F.v19(F.Ilk.CORNFLOWERBLUE.withAlpha(.7))}}),t}function n(i,t){e.viewer.scene.primitives.add(new F.WV0({geometryInstances:new F.aBy({geometry:new F.i4B({polygonHierarchy:new F.rVe(F.b91.fromDegreesArray(i)),height:t})}),appearance:new F.SDu({material:new F.F5T({fabric:{type:"Water",uniforms:{baseWaterColor:new F.Ilk(.8,207/255,105/255,.5),normalMap:"static/水体/waterNormals.jpg",frequency:1e3,animationSpeed:.001,amplitude:10,specularIntensity:2}}})}),name:"洪水淹没面"}))}let o,l,a=[];function s(){if(n(p,h.value),e.viewer.scene.primitives.length<13){const i={elev:0};F.llc.track(i);const t=e.slider;F.llc.applyBindings(i,t),e.ko=F.llc.getObservable(i,"elev").subscribe((function(i){for(let r=e.ecList.length;r<e.viewer.scene.primitives.length;r++)e.viewer.scene.primitives.get(r).show=!1;e.viewer.scene.primitives.add(new F.WV0({geometryInstances:new F.aBy({geometry:new F.i4B({polygonHierarchy:new F.rVe(F.b91.fromDegreesArray(p)),height:i})}),appearance:new F.SDu({material:new F.F5T({fabric:{type:"Water",uniforms:{baseWaterColor:new F.Ilk(219/255,207/255,105/255,.6),normalMap:"static/水体/waterNormals.jpg",frequency:1e3,animationSpeed:.01,amplitude:10,specularIntensity:2}}})})}));const t=Number(i),n=3,o=Math.min(10,.1*n),l=[],a={entries:[{height:t-.5*n-o,color:F.Ilk.GOLDENROD.withAlpha(0)},{height:t-.5*n,color:F.Ilk.GOLDENROD.withAlpha(1)},{height:t+.5*n,color:F.Ilk.GOLDENROD.withAlpha(1)},{height:t+.5*n+o,color:F.Ilk.GOLDENROD.withAlpha(0)}]};l.push(a);const s=F.J6w({scene:e.viewer.scene,layers:l});e.viewer.scene.globe.material=s}))}a.pop(),e.viewer.entities.remove(l),e.viewer.entities.remove(o),l=void 0,o=void 0,a=[];for(let i=0;i<e.hsmPList.length;i++)e.viewer.entities.removeById(e.hsmPList[i])}e.handler2.setInputAction((function(n){const s=e.viewer.scene.pickPosition(n.position),r=F.ZX$.toDegrees(F.$BH.fromCartesian(s).longitude),c=F.ZX$.toDegrees(F.$BH.fromCartesian(s).latitude);if(p.push(Number(r)),p.push(Number(c)),F.rif(s)){if(0===a.length){l=i(s),a.push(s);const e=new F.KdC((function(){return new F.rVe(a)}),!1);o=t(e)}a.push(s),i(s)}}),F.Wvr.LEFT_CLICK),e.handler2.setInputAction((function(i){if(F.rif(l)){const t=e.viewer.scene.pickPosition(i.endPosition);F.rif(t)&&(l.position.setValue(t),a.pop(),a.push(t))}}),F.Wvr.MOUSE_MOVE),e.handler2.setInputAction((function(e){s()}),F.Wvr.RIGHT_CLICK)},g=()=>{m();for(let o=e.ecList.length;o<e.viewer.scene.primitives.length;o++)e.viewer.scene.primitives.get(o).show=!1;const i=[],t={entries:[{height:1,color:F.Ilk.AQUA.withAlpha(0)},{height:2,color:F.Ilk.AQUA.withAlpha(0)},{height:2,color:F.Ilk.AQUA.withAlpha(0)},{height:1,color:F.Ilk.AQUA.withAlpha(0)}]};i.push(t);const n=F.J6w({scene:e.viewer.scene,layers:i});e.viewer.scene.globe.material=n,p=[]},_=()=>{function i(i){const t=e.viewer.entities.add({position:i,point:{color:F.Ilk.WHITE,pixelSize:5,heightReference:F.MDq.NONE}});return e.dmx_pointList.push(t.id),t}function t(i){let t;return t=e.viewer.entities.add({polyline:{positions:i,clampToGround:!0,width:3}}),e.dmxList.push(t.id),t}function n(){a.pop(),t(a),e.viewer.entities.remove(l),e.viewer.entities.remove(o),l=void 0,o=void 0,a=[]}e.dmxList=[];let o,l,a=[];e.handler3.setInputAction((function(n){const s=e.viewer.scene.pickPosition(n.position);if(F.rif(s)){if(0===a.length){l=i(s),a.push(s);const e=new F.KdC((function(){return a}),!1);o=t(e)}a.push(s),i(s)}}),F.Wvr.LEFT_CLICK),e.handler3.setInputAction((function(i){if(F.rif(l)){const t=e.viewer.scene.pickPosition(i.endPosition);F.rif(t)&&(l.position.setValue(t),a.pop(),a.push(t))}}),F.Wvr.MOUSE_MOVE),e.handler3.setInputAction((function(i){n();const t=new Array,o=e.viewer.entities.getById(e.dmxList[1]).polyline,l=o.positions._value[0],a=o.positions._value[1],s=F.b91.distance(l,a),r=parseInt(s/5),c=new Array;for(let e=0;e<r;++e){const i=e/(r-1),t=F.b91.lerp(l,a,i,new F.b91);c.push(t)}e.viewer.scene.clampToHeightMostDetailed(c).then((function(i){for(let o=0;o<r-1;o++){var n;const l=i[o],a=i[o+1],s=F.b91.distance(l,a),r=F.$BH.fromCartesian(l).height,c=F.$BH.fromCartesian(a).height,d=Math.abs(r-c),u=180*Math.asin(d/s)/3.1415926;if(u<15){n=(15-u)/15*25+75;const t=e.viewer.entities.add({polyline:{positions:[i[o],i[o+1]],arcType:F.m9g.NONE,width:5,material:new F.zs({color:F.Ilk.WHITE}),depthFailMaterial:new F.zs({color:F.Ilk.WHITE})}});e.dmx_fdxList.push(t.id)}else if(u<30){n=(u-15)/15*25+25;const t=e.viewer.entities.add({polyline:{positions:[i[o],i[o+1]],arcType:F.m9g.NONE,width:5,material:new F.zs({color:F.Ilk.GREEN}),depthFailMaterial:new F.zs({color:F.Ilk.GREEN})}});e.dmx_fdxList.push(t.id)}else if(u<45){n=(u-30)/15*25;const t=e.viewer.entities.add({polyline:{positions:[i[o],i[o+1]],arcType:F.m9g.NONE,width:5,material:new F.zs({color:F.Ilk.BLUE}),depthFailMaterial:new F.zs({color:F.Ilk.BLUE})}});e.dmx_fdxList.push(t.id)}else{n=0;const t=e.viewer.entities.add({polyline:{positions:[i[o],i[o+1]],arcType:F.m9g.NONE,width:5,material:new F.zs({color:F.Ilk.RED}),depthFailMaterial:new F.zs({color:F.Ilk.RED})}});e.dmx_fdxList.push(t.id)}t.push(n)}let l=0;for(let e=0;e<t.length;e++)l+=t[e];const a=Number(o.positions._value[0].x+o.positions._value[1].x)/2,s=Number(o.positions._value[0].y+o.positions._value[1].y)/2,c=Number(o.positions._value[0].z+o.positions._value[1].z)/2,d=new F.b91(a,s,c),u=e.viewer.entities.add({position:d,label:{text:"岸坡评价分数:"+parseInt(l/r),font:"4pt sans-serif",horizontalOrigin:F.I5p.LEFT,verticalOrigin:F.s2f.BOTTOM,fillColor:F.Ilk.BLACK,showBackground:!0,backgroundColor:new F.Ilk(1,1,1,.7),backgroundPadding:new F.pQ4(8,4)}});e.dmx_labelList.push(u.id)})),o.show=!1,e.handler3.removeInputAction(F.Wvr.LEFT_CLICK)}),F.Wvr.RIGHT_CLICK)},b=()=>{for(let i=0;i<e.dmx_fdxList.length;i++)e.viewer.entities.removeById(e.dmx_fdxList[i]);for(let i=0;i<e.dmx_labelList.length;i++)e.viewer.entities.removeById(e.dmx_labelList[i]);for(let i=0;i<e.dmx_pointList.length;i++)e.viewer.entities.removeById(e.dmx_pointList[i])},I=()=>{console.log(e.zxlcdList.length)},y=()=>{e.viewer.terrainProvider=new F.DX$({url:`http://${e.ip}/terrain/甘孜地形切片/${e.value}`,minimumLevel:0,maximumLevel:15})},k=()=>{1==e.show_dmaa?e.viewer.entities.getById("XSH_dmaa").show=!0:e.viewer.entities.getById("XSH_dmaa").show=!1},C=()=>{1==e.show_hyda?e.viewer.entities.getById("XSH_hyda").show=!0:e.viewer.entities.getById("XSH_hyda").show=!1},L=()=>{if(1==e.show_zxlcd)for(let i=0;i<e.zxlcdList.length;i++)e.viewer.entities.getById(e.zxlcdList[i]).show=!0;else for(let i=0;i<e.zxlcdList.length;i++)e.viewer.entities.getById(e.zxlcdList[i]).show=!1},D=()=>{if(1==e.show_pic_1)for(let i=0;i<e.tkpic_billboard_List.length;i++)e.viewer.entities.getById(e.tkpic_billboard_List[i]).show=!0;else for(let i=0;i<e.tkpic_billboard_List.length;i++)e.viewer.entities.getById(e.tkpic_billboard_List[i]).show=!1},x=()=>{if(1==e.show_pic_2)for(let i=0;i<e.hfpic_billboard_List.length;i++)e.viewer.entities.getById(e.hfpic_billboard_List[i]).show=!0;else for(let i=0;i<e.hfpic_billboard_List.length;i++)e.viewer.entities.getById(e.hfpic_billboard_List[i]).show=!1},O=()=>{console.log(e.e,e.n),e.viewer.camera.setView({destination:F.b91.fromDegrees(Number(e.e),Number(e.n),6400),orientation:{heading:F.ZX$.toRadians(2),pitch:F.ZX$.toRadians(-70)}})};return{drawDmx:_,cleanDmx:b,viewTO:O,fn_show_pic_2:x,fn_show_pic_1:D,fn_show_zxlcd:L,fn_show_dmaa:k,fn_show_hyda:C,test:I,qcsj:m,QueryPoint:w,cleanQueryPoint:v,selectterrain:y,viewTopDown:u,viewWithAnimate:i,num:h,drawRange:f,cleanRange:g,...(0,K.BK)(e)}}},q=t(627);const G=(0,q.Z)(Q,[["render",Z]]);var Y=G,J={components:{MainMap:Y}};const ee=(0,q.Z)(J,[["render",l]]);var ie=ee,te=t(354);t(834);(0,n.ri)(ie).use(te.Z).mount("#app")}},i={};function t(n){var o=i[n];if(void 0!==o)return o.exports;var l=i[n]={exports:{}};return e[n].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(i,n,o,l){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],l=e[d][2];for(var s=!0,r=0;r<n.length;r++)(!1&l||a>=l)&&Object.keys(t.O).every((function(e){return t.O[e](n[r])}))?n.splice(r--,1):(s=!1,l<a&&(a=l));if(s){e.splice(d--,1);var c=o();void 0!==c&&(i=c)}}return i}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,o,l]}}(),function(){t.d=function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){var e={143:0};t.O.j=function(i){return 0===e[i]};var i=function(i,n){var o,l,a=n[0],s=n[1],r=n[2],c=0;if(a.some((function(i){return 0!==e[i]}))){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(r)var d=r(t)}for(i&&i(n);c<a.length;c++)l=a[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},n=self["webpackChunkcsp1"]=self["webpackChunkcsp1"]||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(60)}));n=t.O(n)})();
//# sourceMappingURL=app.c0fd928a.js.map